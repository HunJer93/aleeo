#!/bin/bash

# Test runner script for local development
# This script runs all test suites in the correct order

set -e

echo "ğŸš€ Running complete test suite..."

echo ""
echo "ğŸ“‹ Step 1: Running RSpec (Backend) tests..."
echo "================================================="
RAILS_ENV=test bundle exec rspec --format progress

echo ""
echo "ğŸ­ Step 2: Running Cucumber (Integration) tests..."
echo "=================================================="
RAILS_ENV=test bundle exec cucumber --format progress

echo ""
echo "âš›ï¸  Step 3: Running Jest (Frontend) tests..."
echo "============================================="
cd aleeo
npm test -- --coverage --ci --watchAll=false
cd ..

echo ""
echo "âœ… All tests passed! ğŸ‰"
echo ""
echo "ğŸ“Š Coverage reports:"
echo "  - Backend: coverage/index.html"
echo "  - Frontend: aleeo/coverage/lcov-report/index.html"